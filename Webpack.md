手写迷你 webpack



抽象语法树AST



什么是抽象语法树？



抽象语法树是源代码的抽象语法结构树，一种计算机更容易理解的表现形式。我们所编写的代码语句都会被解析成一个个的树节点，一个代码文件解析后会生成一棵节点树。



抽象语法树能干啥？



- IDE 的错误提示、代码格式化、代码高亮、代码自动补全等
- JSLint、JSHint、ESLint 对代码错误或风格的检查等
- Webpack、rollup 进行代码打包等
- Babel 转换 ES6 到 ES5 语法
- 注入代码统计单元测试覆盖率



Babel



Babel 是一个工具链，主要用于将 ES5+ 转换为向后兼容的 JavaScript 语法，以便能在新旧版本的浏览器环境中正常运行。



通过 Babel 我们可以做以下事情：

- 语法转换
- 通过 Polyfill 方式在目标环境中添加缺失的特性（通过第三方 Polyfill 模块，例如 `core-js`实现）
- 源码转换 (codemods)



webpack 构建过程



1. 读取 webpack 基础配置
2. 入口文件分析：分析依赖模块、分析内容、编译内容
3. 依赖模块分析：分析依赖模块是否包含其他模块、分析内容、编译内容
4. 生成打包文件





